---
title: Hexo进一步
date: 2017-04-26
tags: Hexo
categories: 
- 杂记
comments: true
---

Hexo搭建博客完成后，通过hexo的配置，可以定制我们博客的标题、副标题、描述等等内容，另外主题的配置文件中，也会为我们提供许多页面上的配置，通过这些配置，可以实现一些个性化定制，一般都有比较详细的配置注释（一定是因为json没有注释，所以配置才不用json的）。

#### 添加评论
第一种情况，在主题配置中有相关配置，比如多说、disqus等。因为多说最近关闭，选择了使用disqus，只是需要翻墙才能够正常使用。（以下操作可能都需要翻墙）  
首先是注册帐号，之后在个人的首页中，settings中有Add Disqus To site，之后在最下面是Get Start。之后就是一些选择和配置。完成这些以后将disqus的shortname配置到主题的配置文件中就可以了。  
第二种情况是主题没有相关配置，这时候需要我们自己去将disqus提供的代码添加到页面中，具体做法参考添加网易云音乐中。

#### 添加网易云音乐
网易云因为支持外链，一种是iframe模式，一种flash模式，只需要将代码加入我们页面中，就可以生成网易云音乐的简易播放器。进入网易云音乐的网页版，搜索我们要的歌曲，或者是歌单，会有个生成外链的链接。在这里就可以得到我们要的网易云音乐的外链。  
下一步就需要我们研究主题的源码了，在`themes`文件夹下找到自己使用的主题，其中`layout`文件夹中存放的就是主题的模板文件，静态文件的生成就是按照这些模板文件来生成的。Hexo支持很多模板引擎，如果是我们自己设计自己的主题，可以选择其中一种来深入学习。如果我们仅仅是想在现有主题中添加修改一些内容，比如这里我们要添加网易云音乐的外链，我们只需要照着样子添加进去就可以了。比如我使用的这个主题模板使用的是jade，通过比较几个文件，其实就是`标签名(标签属性)`，通过缩进来控制层级。将我们找到的网易云音乐外链改成模板引擎解构，添加到相应位置。可以添加一个class、id属性，在source文件夹中自定义css或js。

我们了解了模板引擎，也就大致明白我们的页面是怎么回事了。查看[Hexo变量](https://hexo.io/zh-cn/docs/variables.html)可以了解到在模板引擎中可以使用的变量，通过这些变量以及对模板引擎的熟练使用，应该就可以完全自定义我们的博客了，比如还可以添加统计分析系统等等。

#### 网站收录
使用site:[blogname].github.io可以检测自己的博客是非被搜索引擎收录。这里以谷歌为例，如果搜索不到，谷歌会提示使用`Search Console`。在这里，我们可以点击添加属性来添加我们的网站，之后需要验证此域名是否属于你。验证中，我是用的是最简单的HTML标记，只需要修改模板引擎就可以实现。谷歌验证之后，应该是很快就能被收录，我们也可以添加站点地图，使得搜索更准确。  
站点地图使用了另一个插件`hexo-generator-sitemap`，然后在Hexo配置中添加配置
```
sitemap:
  path: sitemap.xml
```
部署之后在谷歌Search Console中添加站点地图即可。

百度的收录过程和谷歌收录过程大同小异。收录地址可以百度搜索百度站长。提交网站后验证和谷歌一样。只是github禁止百度抓取，可以采用的解决办法是将Hexo同时部署都coding中，通过Hexo配置，可以同时部署到github和coding中。
```bash
deploy:
  type: git
  repo: 
    github: https://github.com/PFanz/Fanz.github.io.git
    coding: https://git.coding.net/PFanz/PFanz.git
  branch: master
```
sitemap可以使用`hexo-generator-baidu-sitemap`生成。另外百度的收录需要较长的时间，也有可能是我的方式不对，至今还未被收录。

#### 之后
熟悉了模板引擎，可以尝试实现自己的Hexo主题。